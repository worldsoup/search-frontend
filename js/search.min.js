function showMoreResults() {
    $.ajax({
        type: "GET",
        url: "http://50.56.188.4:9200/_search/scroll?scroll=10m&size=3&scroll_id=" + curScrollId,
        success: function(e) {
            parsedData = JSON.parse(e);
            curHits = parsedData.hits.hits;
            if (curHits.length > 0) {
                dust.render("scrollSearchResult", JSON.parse(e), function(e, t) {
                    $("#searchResults").append(t);
                });
                ajaxOK = !0;
            }
        },
        error: function(e) {
            console.log("Error occured: " + JSON.stringify(e));
        }
    });
}

var ajaxOK = !1, curScrollId = 0;

$("#frmSearch").submit(function() {
    $.ajax({
        type: "POST",
        url: "http://50.56.188.4:9200/appstore/_search?scroll=10m&size=3",
        data: JSON.stringify({
            query: {
                bool: {
                    must: [ {
                        query_string: {
                            default_field: "_all",
                            query: $("#searchKeyword").val()
                        }
                    } ],
                    must_not: [],
                    should: []
                }
            },
            from: 0,
            sort: [],
            facets: {}
        }),
        success: function(e) {
            parsedData = JSON.parse(e);
            curScrollId = parsedData._scroll_id;
            curHits = parsedData.hits.hits;
            if (curHits.length > 0) {
                dust.render("searchResult", JSON.parse(e), function(e, t) {
                    $("#searchResults").html(t);
                    var n = $(window).height(), r = $(".results-container");
                    r.css("height", n);
                    $(".search-prompt").animate({
                        height: "0px"
                    }, 350, "ease-out");
                });
                ajaxOK = !0;
            } else $("#searchResults").html("<p><b>&nbsp;&nbsp; No results found</b></p>");
        },
        error: function(e) {
            console.log("Error occured: " + JSON.stringify(e));
        }
    });
    return !1;
});

$(window).bind("scroll", function() {
    if ($(this).scrollTop() + $(this).height() >= $(document).height() - 600 && ajaxOK === !0) {
        ajaxOK = !1;
        showMoreResults();
    }
});